# 01. 협력하는 객체들의 공동체

> 시너지를 생각하라. 전체는 부분의 합보다 크다. - 스티븐 코비(Stephen R.Covey)

## TL;DR

1. **객체지향**이란 시스템을 상호작용하는 **자율적인 객체들의 공동체**로 바라보고, 객체를 이용해 시스템을 분할하는 방법이다.
2. 자율적인 객체란 **상태**와 **행위**를 함께 지니며 스스로 자신을 책임지는 객체를 의미한다.
3. 객체는 시스템의 행위를 구현하기 위해 다른 객체와 **협력**한다. 각 객체는 협력 내에서 정해진 **역할**을 수행하며 역할은 관련된 **책임**의 집합이다.
4. 객체는 다른 객체와 협력하기 위해 메시지를 전송하고, **메시지**를 수신한 객체는 메시지를 처리하는 데 적합한 **메서드**를 자율적으로 선택한다.

<hr>
<br>
- 객체지향의 목표는 실세계를 모방하는 것이 아닌 새로운 세계를 창조하는 것이다.

- 소프트웨어 개발자의 역할은 실세계를 소프트웨어 안으로 옮겨 담는 것이 아닌 **고객과 사용자를 만족시킬 수 있는 신세계를 창조하는 것** 이다.

- 실세계에 대한 비유가 객체지향의 다양한 측면을 이해하고 학습하는데 효과적이기 때문에 오늘 날에도 실세계 객체와 소프트웨어 객체를 연결지어 설명한다.
  - 프로그램을 설계하고 구현하는 실무적인 관점에서는 부적합하지만
  - 객체지향이라는 용어에 담긴 기본 사상을 이해하고 학습하는데 매우 효과적이다.

<hr>
<br>

```
1. 커피를 마시고 싶은 손님은 카페에 들어와 캐셔에게 커피를 주문한다.
2. 주문을 받은 캐셔는 바리스타에게 커피를 만들어달라고 요청한다.
3. 바리스타는 커피를 만들기 시작하고, 다 만들면 캐셔에게 완성된 커피를 전달한다.
4. 캐셔는 손님에게 커피를 제공한다.
```

- 손님의 목표(커피 구매)를 위해 손님, 캐셔와 바리스타가 **협력(collaboration)** 한다.

  - **역할(role)**: 손님, 캐셔, 바리스타
  - **책임(responsibility)**: 손님(커피 주문), 캐셔(주문 받기), 바리스타(커피 제조)

### 객체 지향에서 가장 중요한 개념: 역할, 책임, 협력

- 사람은 스스로 해결하지 못하는 문제와 마주치면 문제 해결에 도움을 줄 수 있거나 서비스를 제공해줄 수 있는 사람에게 도움을 **요청(request)** 한다.
  - 일반적으로 하나의 문제를 해결(커피 구매)하는데 다수의 사람 혹은 역할이 필요하므로
  - 한 사람(캐셔)에 대한 요청이 또 다른 사람(바리스타)에게 요청을 유발한다: _요청은 **연쇄적**으로 발생한다._
- 요청을 받은 사람(캐셔, 바리스타)은 주어진 책임(캐셔: 주문 받기, 바리스타: 커피 제조)을 다하면서 문제 해결에 필요한 지식이나 서비스를 제공함으로서 **응답(response)** 한다.

  - 바리스타는 커피가 완성되었다는 것을 캐셔에게 알려준다: 캐셔의 요청에 응답
  - 캐셔는 손님에게 완성된 커피를 전달한다: 손님의 주문에 응답

- **특정한 역할은 특정한 책임을 암시한다.**: 협력이 원활하게 진행되는데 필요한 핵심적인 구성 요소

  - _여러 사람이 동일한 역할을 수행할 수 있다._

    - 손님 입장에서는 어떤 캐셔가 주문을 받고 어떤 바리스타가 커피를 제조하든 결국 목표(커피 구매)에 따른 책임(주문 받기, 커피 제조, 커피가 완성되었다는 사실 통보)을 이행만 할 수 있으면 상관없다.

  - _역할은 대체 가능성을 의미한다._

    - 손님 입장에서는 캐셔는 대체 가능(substitutable)하다.
    - 즉, 2명이 동일한 역할을 할 수 있다면, 요청자 입장에서는 어떤 사람이 역할을 수행하더라도 문제가 되지 않는다.

  - _책임을 수행하는 방법은 자율적으로 선택할 수 있다._

    - 커피를 제조하라는 동일한 요청에 바리스타는 서로 다른 방식(라떼 아트를 만들거나 혹은 커피 향을 좀 더 향기롭게 하거나)으로 요청을 처리할 수 있다.: **다형성(polymorphism)**

  - _한 사람이 동시에 여러 역할을 수행할 수 있다._
    - 한 사람이 캐셔와 바리스타 역할을 동시에 수행할 수 있다.

<hr>
<br>

- 사람을 **객체**로, 요청을 **메시지**로, 요청을 처리하는 방법을 **메서드**로 표현할 수 있다.

  - 사람: 공통의 목표를 달성하기 위해 협력한다.
  - 객체: 애플리케이션의 기능을 구현하기 위해 협력한다.

- 협력의 핵심은 _특정한 책임을 수행하는 역할들 간의 연쇄적인 요청과 응답_ 을 통해 목표를 달성한다.
  - 목표는 더 작은 책임으로 분할되고, 책임을 수행할 수 있는 적절한 역할을 가진 사람에 의해 수행된다.

### 객체지향 설계는 적절한 객체에 적절한 책임을 할당하는 것에서 시작한다.

- 객체지향 설계의 품질을 결정하는 가장 중요한 요소는 **책임**으로, 책임이 불분명한 객체는 애플리케이션의 미래를 불분명하게 만든다.
- 역할은 _관련성 높은 책임의 집합_ 으로 유연하고 재사용 가능한 협력 관계를 구축한다.

<hr>
<br>

- 실제로 협력에 참여하는 주체는 **객체**다.

  - 실행 중인 애플리케이션 내부에는 쉴 새 없이 메시지를 주고받으며 협력하는 객체가 존재한다.

- 객체는 애플리케이션의 기능을 구현하기 위해 존재한다.: _객체의 품질이 협력의 품질을 결정한다._

  - _객체는 충분히 **'협력적'** 이어야 한다._: 다른 객체의 요청에 응할지, 어떤 방식으로 요청에 응답할지 스스로 결정할 수 있다.

  - _객체는 충분히 **'자율적'** 이어야 한다._

- 커피를 제조하는 바리스타는 제조 방법을 알아야하는 것처럼, 객체가 어떤 행동(behavior)을 하기 위해 필요한 상태(state)를 알아야한다.

- 객체의 자율성은 객체의 내부와 외부를 명확하게 구분하는 것으로부터 나온다.

  - 내부는 객체 스스로 관리하고 외부에서 간섭할 수 없도록 차단해야하며
  - 외부에서는 접근이 허락된 수단을 통해서만 다른 객체와 소통해야한다.

  - 객체는 다른 객체가 '무엇(what)'을 수행했는지는 알 수 있지만 '어떻게(how)' 수행했는지에 대해 알 수 없다.: _데이터와 프로세스를 객체라는 하나의 틀 안에 함께 묶음_ 으로서 객체의 자율성을 보장한다.

- 객체는 협력을 위해 다른 객체에게 메시지를 전송(**송신자: sender**)하고 다른 객체로부터 메시지를 수신(**수신자: sender**)한다.

  - 수신자는 수신된 메시지를 이해할 수 있는지 여부를 판단하고 미리 정해진 자신만의 방법(**메서드: method**)에 따라 메시지를 처리한다.
    - 객체지향 프로그래밍 언어에서 메서드는 클래스 안에 포함된 함수 또는 프로시저를 통해 구현된다.
    - _수신자가 실행 시간에 메서드를 선택할 수 있다._: 다른 프로그래밍 언어와 객체지향 프로그래밍 언어를 구분짓는 핵심 특징
    - 절차적인 언어는 프로시저 호출에 대한 실행 코드를 컴파일 시간에 결정한다.

- **메시지와 메서드의 분리**는 객체의 협력에 참여하는 객체들 간의 자율성을 증진시킨다.: **캡슐화(encapsulation)**
  - 바리스타로 전달된 커피 제조 요청: 메시지(외부의 요청이 무엇인가)
  - 커피를 제조하는 구체적인 방법: 메서드(요청을 처리하기 위한 구체적인 방법)
    - 커피 머신을 사용하거나 수작업 등 다양한 방식으로 커피를 제조할 수 있다.
    - 바리스타는 '커피 제조'라는 메시지에 응답하기 위해 자신만의 자율적인 방법에 따라 커피를 만들 수 있다.
